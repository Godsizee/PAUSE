/* public/assets/css/pages/_planer.css */

/* Haupt-Header Container */
.planer-header {
    display: flex;
    flex-direction: column; /* Stacks title and controls vertically */
    align-items: stretch;    /* Children take full width */
    gap: 20px;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 1.5rem;
}

/* Wrapper für alle Controls auf der rechten Seite */
.planer-actions-wrapper {
    display: flex;
    flex-direction: column; /* Stellt Filter und Publish-Controls untereinander */
    gap: 15px; /* Abstand zwischen den beiden Control-Blöcken */
    align-items: stretch; /* Sorgt dafür, dass beide Blöcke die gleiche Breite haben */
}

/* Container für die Filter (Selects, Datum) */
.planer-controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px 15px;
    align-items: flex-end;
    justify-content: flex-start; /* Richtet die Filter links aus */
}

.planer-controls .form-group {
    margin-bottom: 0;
    flex-basis: 150px;
    flex-grow: 1;
}
/* Spezifische Breite für längere Selects */
.planer-controls .form-group#class-selector-container,
.planer-controls .form-group#teacher-selector-container {
    flex-basis: 200px;
}
.planer-controls .form-group label {
    font-size: 0.85rem;
    margin-bottom: 3px;
}


/* Container für den Veröffentlichungs-Status und Buttons */
.publish-controls {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 15px;
    background-color: var(--color-surface-alt);
    padding: 10px 15px;
    border-radius: 6px;
    border: 1px solid var(--color-border);
    box-sizing: border-box;
}
.dark-mode .publish-controls {
    background-color: var(--color-surface-alt);
}

.publish-status {
    font-weight: bold;
    color: var(--color-text-muted);
    font-size: 0.9rem;
    white-space: nowrap;
    flex-grow: 1; /* Drückt die Buttons nach rechts */
}

.status-indicator {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    margin-left: 5px;
    font-size: 0.8rem;
    font-weight: normal;
}

.status-indicator.published {
    background-color: var(--color-success);
    color: white;
}

.status-indicator.not-published {
    background-color: #e9ecef;
    color: #6c757d;
}
.dark-mode .status-indicator.not-published {
    background-color: #343a40;
    color: #adb5bd;
}

.publish-actions {
    display: flex;
    gap: 10px;
    flex-wrap: nowrap; /* Verhindert Umbruch der Buttons selbst */
    flex-shrink: 0; /* Verhindert, dass der Button-Container schrumpft */
}

.publish-actions .btn-small {
    padding: 6px 10px;
    font-size: 0.85rem;
    min-width: 100px; /* Einheitliche Mindestbreite für Buttons */
    height: 36px; /* Einheitliche Höhe */
    display: flex; /* Für vertikale Zentrierung des Textes */
    justify-content: center;
    align-items: center;
    box-sizing: border-box; /* Padding in die Breite/Höhe einbeziehen */
}

/* Spezielles Styling für die "Zurückziehen"-Buttons */
.publish-actions .btn-small.btn-warning { /* Übernimmt die btn-warning Farbe, falls vorhanden */
    background-color: var(--color-warning); /* Beispiel: Orange für Zurückziehen */
    color: #333; /* Dunklerer Text für besseren Kontrast auf gelb */
    border: 1px solid var(--color-warning);
}
.publish-actions .btn-small.btn-warning:hover {
    background-color: #e6ac00;
    border-color: #e6ac00;
}
.dark-mode .publish-actions .btn-small.btn-warning {
    background-color: #e6ac00;
    border-color: #e6ac00;
}
.dark-mode .publish-actions .btn-small.btn-warning:hover {
    background-color: var(--color-warning);
    border-color: var(--color-warning);
}

/* NEU: Bulk Actions Section */
.bulk-actions-controls {
    display: flex;
    gap: 10px;
    padding: 10px 15px;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 6px;
    /* Removed from planer-actions-wrapper, will be placed below timetable */
    /* width: fit-content; /* Adjust width to content */
    /* margin-left: auto; /* Push to the right */
}
.dark-mode .bulk-actions-controls {
    background-color: var(--color-surface);
}

.bulk-actions-controls .btn-small {
    padding: 6px 12px;
    font-size: 0.85rem;
    height: 36px;
    width: auto;
    display: inline-flex;
    gap: 6px;
    align-items: center;
    background-color: #f8f9fa;
    color: var(--color-text);
    border: 1px solid var(--color-border);
    margin-bottom: 0;
}
.bulk-actions-controls .btn-small:hover {
    background-color: #e9ecef;
    color: var(--color-primary);
}
.dark-mode .bulk-actions-controls .btn-small {
    background-color: var(--color-surface-alt);
    color: var(--color-text);
    border-color: var(--color-border);
}
.dark-mode .bulk-actions-controls .btn-small:hover {
    background-color: #343a40;
    color: var(--color-primary);
}
.bulk-actions-controls .btn-small svg {
    margin-top: -2px; /* Visual alignment */
}


/* NEU: Copy Week Modal */
.copy-week-form {
    display: grid;
    grid-template-columns: 1fr auto 1fr 1fr;
    gap: 15px;
    align-items: flex-end;
    margin-bottom: 20px;
}

.copy-week-form .form-group {
    margin-bottom: 0;
}

.copy-week-form input[readonly] {
    background-color: var(--color-surface-alt);
    color: var(--color-text-muted);
    font-weight: bold;
}
.dark-mode .copy-week-form input[readonly] {
    background-color: var(--color-background);
}


.copy-week-form .arrow-separator {
    font-size: 2rem;
    font-weight: bold;
    color: var(--color-text-muted);
    padding-bottom: 5px; /* Align with inputs */
}

#copy-week-warning {
    display: block; /* Ist immer sichtbar */
    background-color: rgba(255, 189, 0, 0.1);
    border: 1px solid var(--color-warning);
    color: #664d03; /* Darker yellow text */
    margin-top: 0;
    margin-bottom: 20px;
    padding: 10px 15px;
    border-radius: 6px;
}
.dark-mode #copy-week-warning {
    color: var(--color-warning);
}

/* --- Timetable Grid --- */
.timetable-grid {
    display: grid;
    grid-template-columns: 100px repeat(5, 1fr);
    grid-auto-rows: minmax(80px, auto);
    gap: 5px;
    background-color: var(--color-border);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    overflow: hidden;
}

.grid-header {
    background-color: var(--color-surface-alt);
    font-weight: bold;
    text-align: center;
    padding: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
}
.dark-mode .grid-header {
    background-color: var(--color-surface-alt);
}


.grid-header.period-header {
    grid-column: 1 / 2;
    font-size: 0.9rem;
    box-sizing: border-box;
}

.grid-cell {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: stretch;
    gap: 4px;
    padding: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease; /* Transform hinzugefügt */
    position: relative;
    background-color: var(--color-surface);
}
.dark-mode .grid-cell {
    background-color: var(--color-surface);
}

.cell-entry {
    background: rgba(255, 255, 255, 0.9);
    border-radius: 4px;
    padding: 4px 6px;
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    word-break: break-word;
    flex-grow: 1;
    height: 100%;
    box-sizing: border-box;
    /* Verhindert, dass der Text im Eintrag Dragging auslöst (nur die Zelle soll dragbar sein) */
    pointer-events: none;
}
.dark-mode .cell-entry {
    background: rgba(40, 48, 54, 0.9);
    border-color: #444c56;
}

.grid-cell:hover {
    background-color: #f1f5f9;
    transform: scale(1.02); /* Leichter Zoom-Effekt beim Hovern */
    z-index: 5;
}
.dark-mode .grid-cell:hover {
    background-color: #ffffff1a;
}

.grid-cell.selected {
    background-color: rgba(57, 0, 153, 0.1);
    outline: 2px solid var(--color-primary);
    outline-offset: -2px;
    z-index: 10;
}

/* --- DRAG & DROP STYLES (NEU) --- */

/* Element, das gerade gezogen wird */
.grid-cell.dragging {
    opacity: 0.4;
    transform: scale(0.95);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

/* Alle Zellen, während gezogen wird */
.timetable-grid.is-dragging .grid-cell {
    transition: background-color 0.3s ease;
}

/* Zielzelle, über der geschwebt wird (allgemein) */
.grid-cell.drop-target {
    background-color: rgba(57, 0, 153, 0.1); /* Helles Lila */
    transform: scale(1.03);
    z-index: 15;
}

/* Zielzelle, die GÜLTIG ist (kein Konflikt) */
.grid-cell.drop-target-valid {
    background-color: rgba(40, 167, 69, 0.15); /* Helles Grün */
    outline: 2px dashed var(--color-success);
    outline-offset: -2px;
}

/* Zielzelle, die UNGÜLTIG ist (Konflikt) */
.grid-cell.drop-target-invalid {
    background-color: rgba(255, 0, 84, 0.15); /* Helles Rot */
    outline: 2px dashed var(--color-danger);
    outline-offset: -2px;
}
/* --- ENDE DRAG & DROP --- */


.grid-cell strong { font-size: 1rem; font-weight: 700; }
.grid-cell span { font-size: 0.8rem; color: var(--color-text-muted); }
.grid-cell small { font-size: 0.75rem; color: var(--color-text-muted); }

.grid-cell.default-entry { background-color: var(--color-surface-alt); color: var(--color-text-muted); justify-content: center; align-items: center; }
.dark-mode .grid-cell.default-entry { background-color: var(--color-surface-alt); color: var(--color-text-muted); }
.grid-cell.default-entry .cell-entry { flex-grow: 0; height: auto; background: transparent; border: none; }
.grid-cell.default-entry strong, .grid-cell.default-entry span { text-align: center; }

/* Substitution Styles */
.grid-cell.substitution-Vertretung { background-color: #fff0f1; border-left: 4px solid var(--color-danger); }
.grid-cell.substitution-Raumänderung { background-color: #fff9e6; border-left: 4px solid var(--color-warning); }
.grid-cell.substitution-Sonderevent { background-color: #e7f5ff; border-left: 4px solid #007bff; }
.grid-cell.substitution-Entfall { background-color: #f8f9fa; border-left: 4px solid #6c757d; }
.grid-cell.substitution-Entfall > .cell-entry { text-decoration: line-through; color: #6c757d; opacity: 0.8; }
.dark-mode .grid-cell.substitution-Vertretung { background-color: rgba(255, 0, 84, 0.1); }
.dark-mode .grid-cell.substitution-Raumänderung { background-color: rgba(255, 189, 0, 0.1); }
.dark-mode .grid-cell.substitution-Sonderevent { background-color: rgba(0, 123, 255, 0.1); }
.dark-mode .grid-cell.substitution-Entfall { background-color: rgba(108, 117, 125, 0.1); }


/* Block Styles */
.grid-cell.block-start { padding: 0; }
.grid-cell.block-start .cell-entry { border-radius: 0; border: none; width: 100%; }
.grid-cell.substitution-Vertretung.block-start,
.grid-cell.substitution-Raumänderung.block-start,
.grid-cell.substitution-Sonderevent.block-start,
.grid-cell.substitution-Entfall.block-start { justify-content: center; align-items: center; }
.grid-cell.substitution-Vertretung.block-start .cell-entry,
.grid-cell.substitution-Raumänderung.block-start .cell-entry,
.grid-cell.substitution-Sonderevent.block-start .cell-entry,
.grid-cell.substitution-Entfall.block-start .cell-entry { flex-grow: 0; height: auto; width: 90%; border-radius: 4px; border: 1px solid var(--color-border); }

/* KORREKTUR: Styling für Abwesenheits-Warnung (Sichtbarkeit erhöht) */
.grid-cell.teacher-absent .cell-entry {
    background-color: rgba(255, 0, 84, 0.05); /* Heller roter Hintergrund */
    outline: 1px dashed var(--color-danger); /* Dezenterer Rahmen */
    outline-offset: -1px;
}
.dark-mode .grid-cell.teacher-absent .cell-entry {
    background-color: rgba(255, 0, 84, 0.1); /* Etwas mehr Sichtbarkeit im Dark Mode */
}

/* KORREKTUR: Den Namen (mainText, oft der Lehrer) rot hervorheben */
.grid-cell.teacher-absent .cell-entry span {
    color: var(--color-danger);
    font-weight: 700; /* Fett hervorheben */
    background-color: rgba(255, 0, 84, 0.1); /* Leicht roter Hintergrund für den Namen */
    padding: 0 4px;
    border-radius: 3px;
}
.dark-mode .grid-cell.teacher-absent .cell-entry span {
     background-color: rgba(255, 0, 84, 0.2);
     color: #ff8984; /* Helleres Rot im Dark Mode */
}

small.absence-warning {
    font-size: 0.7rem !important;
    font-weight: 700;
    color: var(--color-danger) !important;
    margin-top: 2px;
    line-height: 1.2;
    display: block;
    width: 100%;
    text-align: center;
}
/* --- ENDE Abwesenheits-Warnung --- */


/* --- Modal Styles --- */
.modal-overlay { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background-color: rgba(0, 0, 0, 0.6); 
    z-index: 1040; /* Standard-Overlay-Ebene */
    display: none; 
    justify-content: center; 
    /* KORREKTUR: align-items: center zu flex-start geändert */
    align-items: flex-start; 
    opacity: 0; 
    transition: opacity 0.3s ease; 
    backdrop-filter: blur(5px);
    /* NEU: Padding oben und unten, damit Modal scrollen kann */
    padding: 5vh 0;
    overflow-y: auto; /* Erlaube dem Overlay selbst zu scrollen, falls das Modal + Padding größer als 100vh ist */
}
.modal-overlay.visible { display: flex; opacity: 1; }
.modal-box { 
    background: var(--color-surface); 
    padding: 25px 30px; /* Reduced padding */
    border-radius: 12px; 
    width: 90%; /* Width for mobile */
    max-width: 500px; /* Default max-width */
    box-sizing: border-box;
    max-height: 90vh; /* NEU: Max height (war schon da, aber wird jetzt durch align-items: flex-start wirksam) */
    overflow-y: auto; /* NEU: Allow modal content to scroll */
    margin: 0; /* NEU: Entferne potenziellen auto-margin von align-items */
    display: flex; /* NEU: Flex-Layout für internes Scrolling */
    flex-direction: column; /* NEU: Inhalt stapeln */
}
.modal-box h2 { margin-top: 0; }

/* Modal Conflict Warning */
#modal-conflict-warning {
    display: none;
    background-color: rgba(255, 0, 84, 0.1); /* Helles Rot */
    border: 1px solid var(--color-danger);
    color: var(--color-danger);
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
    font-weight: 600;
}
#modal-conflict-warning div {
    margin-bottom: 5px;
}
#modal-conflict-warning div:last-child {
    margin-bottom: 0;
}
.dark-mode #modal-conflict-warning {
    color: #ff8984;
    border-color: #ff8984;
}


.modal-actions { display: flex; gap: 15px; margin-top: 30px; }
.modal-actions .btn { width: 0; flex-grow: 1; flex-basis: 0; margin-bottom: 0; height: 44px; padding-top: 0; padding-bottom: 0; }
.modal-tabs { display: flex; border-bottom: 1px solid var(--color-border); margin-bottom: 20px; }
.modal-tabs .tab-button { padding: 10px 15px; border: none; background: transparent; cursor: pointer; font-size: 1rem; font-weight: 600; color: var(--color-text-muted); border-bottom: 3px solid transparent; transition: color 0.2s, border-color 0.2s; }
.modal-tabs .tab-button:hover { color: var(--color-primary); }
.modal-tabs .tab-button.active { color: var(--color-primary); border-bottom-color: var(--color-primary); }
.modal-tab-content { display: none; }
.modal-tab-content.active { display: block; }
.hidden { display: none !important; }

/* --- NEU: Stile für Template-Editor Modal --- */

/* Modal zum Erstellen/Verwalten von Vorlagen */
#manage-templates-modal {
    z-index: 1050; /* Höher als Standard, aber niedriger als Bearbeiten-Modal */
}
#manage-templates-modal .modal-box {
    max-width: 800px; /* Keep max-width for desktop */
    width: 95%; /* Use percentage width for responsiveness */
    /* max-height: 90vh; und overflow-y: auto; werden von .modal-box geerbt */
}

/* KORREKTUR: Z-Index für das Bearbeiten-Modal, damit es ÜBER dem Vorlagen-Modal erscheint */
#timetable-modal {
    z-index: 1060; /* Höchste Ebene */
}


/* Ansicht 1: Liste */
.manage-templates-view.active {
    display: flex; /* Erzwinge flex-Verhalten, wenn aktiv */
    flex-direction: column;
    flex: 1;
    min-height: 0;
}

/* Ansicht 2: Editor */
#template-editor-view {
    display: none; /* (wird von JS auf 'block' gesetzt) */
    /* NEU: Sorge dafür, dass der Editor-View-Container flexibel wächst und schrumpft */
    flex: 1;
    min-height: 0; /* Wichtig für Flexbox-Scrolling */
    display: flex;
    flex-direction: column;
}


/* Container für Formular (Name/Beschreibung) */
#template-editor-view > div:nth-of-type(2) { 
    display: flex;
    flex-direction: column; /* Stack on mobile */
    gap: 15px; 
    margin-bottom: 15px;
    flex-shrink: 0; /* Verhindert das Schrumpfen des Formulars */
}

/* Container für das simplifizierte Grid */
#template-editor-grid-container {
    margin-top: 15px; 
    border: 1px solid var(--color-border); 
    border-radius: 8px; 
    overflow-x: auto; /* KORREKTUR: Ermöglicht horizontales Scrollen auf kleinen Geräten */
    overflow-y: hidden; /* Verhindert doppeltes Scrollen */
    flex-shrink: 1; /* Erlaube dem Grid-Container zu schrumpfen */
    min-height: 300px; /* Gib dem Grid eine Mindesthöhe, bevor es den Container scrollt */
}

/* Das Grid im Template-Editor selbst */
.template-editor-grid {
    /* Stellt sicher, dass das Grid die Basisstile von .timetable-grid erbt */
    min-width: 600px; /* NEU: Stellt sicher, dass das Grid eine Mindestbreite hat und scrollt */
    grid-template-columns: 80px repeat(5, 1fr); /* Schmalere Zeitspalte */
    grid-auto-rows: minmax(60px, auto); /* Kleinere Mindesthöhe für Zeilen */
    gap: 2px; /* Dünnere Linien */
}

/* Kleinere Schriftarten speziell im Template-Grid */
.template-editor-grid .grid-header {
    font-size: 0.8rem;
    padding: 5px;
    min-height: 40px;
}
.template-editor-grid .grid-header.period-header {
    font-size: 0.7rem;
    line-height: 1.2;
    padding: 4px 2px;
}
.template-editor-grid .grid-cell .cell-entry {
    padding: 2px 4px;
    min-height: 50px;
}
.template-editor-grid .grid-cell strong { font-size: 0.8rem; }
.template-editor-grid .grid-cell span { font-size: 0.7rem; }
.template-editor-grid .grid-cell small { font-size: 0.65rem; }


/* Media Query für kleinere Bildschirme */
@media (min-width: 600px) {
    /* Formular Name/Beschreibung nebeneinander auf größeren Bildschirmen */
    #template-editor-view > div:nth-of-type(2) {
        flex-direction: row;
    }
}

@media (max-width: 1200px) {
    .planer-header { flex-direction: column; align-items: stretch; }
    .planer-actions-wrapper { min-width: 100%; }
    .planer-controls { justify-content: flex-start; }
    .publish-controls { justify-content: flex-start; }
    .publish-status { flex-grow: 0; width: 100%; margin-bottom: 10px; }
    /* Ensure bulk actions wrap on smaller screens if needed */
    .bulk-actions-controls { flex-wrap: wrap; justify-content: flex-start; }
}

@media (max-width: 768px) {
    /* Stack bulk action buttons vertically */
    .bulk-actions-controls {
        flex-direction: column;
        align-items: stretch; /* Make buttons full width */
    }
    .bulk-actions-controls .btn-small {
        width: 100%;
        justify-content: center;
    }

    /* NEU: Anpassungen für das Template-Editor-Modal auf Mobilgeräten */
    #manage-templates-modal .modal-box {
        padding: 15px; /* Noch weniger Padding */
        width: 95vw; /* Fast volle Breite */
    }

    #template-editor-view > div:nth-of-type(2) { /* Formular Name/Beschreibung */
        flex-direction: column; /* Bleibt untereinander */
    }
}

/* NEU: CSS für Absence Management */
#absence-management {
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding: 25px 30px; /* Standard-Padding für Sektionen */
}

.absence-container {
    display: grid;
    grid-template-columns: 1fr 350px; /* Kalender links, Formular rechts */
    gap: 25px;
    align-items: flex-start;
}

#absence-calendar-container {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    padding: 20px;
    border-radius: 8px;
    /* Höhe wird von FullCalendar gesteuert */
}

#absence-form-container {
    background-color: var(--color-surface-alt);
    padding: 20px;
    border-radius: 8px;
    border: 1px solid var(--color-border);
    position: sticky;
    top: 100px; /* Hält das Formular beim Scrollen sichtbar */
}
.dark-mode #absence-form-container {
    background-color: var(--color-surface-alt);
}

#absence-form-container h3 {
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 1.3rem;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 10px;
}

#absence-form .form-grid-col-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
}

#absence-form .form-actions {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

#absence-form .btn-danger {
    flex-grow: 0; /* Löschen-Button nicht strecken */
    width: auto;
}

/* FullCalendar Anpassungen */
#absence-calendar {
    max-height: 70vh; /* Begrenzt die Höhe des Kalenders */
}

/* Farbcodes für Abwesenheiten im Kalender */
.fc-event.absence-krank {
    background-color: var(--color-danger);
    border-color: var(--color-danger);
}
.fc-event.absence-fortbildung {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
}
.fc-event.absence-beurlaubt {
    background-color: var(--color-warning);
    border-color: var(--color-warning);
    color: #333;
}
.fc-event.absence-sonstiges {
    background-color: var(--color-text-muted);
    border-color: var(--color-text-muted);
}
/* Styling für das ausgewählte Event */
.fc-event.absence-selected {
    box-shadow: 0 0 0 3px var(--color-primary);
    /* Helle outline für dark mode */
    outline: 2px solid var(--color-surface);
}
.dark-mode .fc-event.absence-selected {
     outline-color: var(--color-surface);
}

.fc-event-main {
    cursor: pointer;
}

/* KORREKTUR: Layout für das Abwesenheits-Formular (flacher und breiter) */
#absence-form.absence-form-layout {
    display: grid;
    /* Nutzt auto-fit, um Spalten bei Bedarf umzubrechen */
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px 20px;
    align-items: flex-end; /* Richtet Elemente an der Unterkante aus (wichtig für Aktionen) */
}

/* Einzelne Formulargruppen */
#absence-form.absence-form-layout .form-group {
    margin-bottom: 0; /* Wird durch grid-gap ersetzt */
}

/* Lehrergruppe und Kommentargruppe sollen mehr Platz einnehmen, wenn möglich */
@media (min-width: 993px) {
    #absence-form.absence-form-layout #absence-teacher-group,
    #absence-form.absence-form-layout #absence-comment-group {
        /* Nimmt 2 Spalten ein, wenn das Grid mehr als 2 Spalten hat */
        grid-column: span 2; 
    }
    
    /* Auf sehr breiten Bildschirmen (mehr als 4 Items nebeneinander) */
    @media (min-width: 1200px) {
        #absence-form.absence-form-layout #absence-teacher-group {
             grid-column: span 3;
        }
        #absence-form.absence-form-layout #absence-comment-group {
             grid-column: span 2;
        }
    }
}

/* Aktions-Gruppe ganz unten und volle Breite */
#absence-form.absence-form-layout #absence-actions-group {
    grid-column: 1 / -1; /* Volle Breite */
    margin-top: 10px; /* Kleiner Abstand nach oben */
}


/* Responsive für Abwesenheits-Seite */
@media (max-width: 992px) {
    .absence-container {
        grid-template-columns: 1fr; /* Stackt Kalender und Formular */
    }
    #absence-form-container {
        position: static; /* Hebt Sticky auf */
        top: auto;
    }
    #absence-calendar {
        max-height: 60vh; /* Etwas weniger Höhe auf Mobilgeräten */
    }

    /* KORREKTUR: Auf Mobilgeräten das Formular-Grid vereinfachen */
    #absence-form.absence-form-layout {
        grid-template-columns: 1fr; /* Alles untereinander */
    }

    #absence-form.absence-form-layout #absence-teacher-group,
    #absence-form.absence-form-layout #absence-comment-group {
        grid-column: 1 / -1; /* Volle Breite (Standard) */
    }
}